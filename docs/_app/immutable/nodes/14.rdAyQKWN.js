import{s as ht,a as b,f as r,l as R,z as ut,d as h,c as y,g as o,h as v,y as te,m as H,j as s,L as M,i as Ce,A as e,M as L,p as ie,E as $e,N as ft,o as _t}from"../chunks/scheduler.BtYfPFkB.js";import{S as dt,i as mt,b as et,d as tt,m as lt,a as at,t as st,e as nt}from"../chunks/index.D_F554_W.js";import{e as Be}from"../chunks/each.D6YF6ztN.js";import{S as vt,H as pt}from"../chunks/sidebar.DryN8hsx.js";const kt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;new TextEncoder;const{document:We}=kt;function rt(l,i,a){const c=l.slice();return c[40]=i[a],c[42]=a,c}function ot(l,i,a){const c=l.slice();return c[43]=i[a],c[42]=a,c}function ct(l){let i,a,c,q=++l[42]+"",p,N,k,f,T=l[43].name+"",z,w,d,S,C=l[43].artist.name+"",B,F,P,A=l[43].playcount+"",_,I,K;return{c(){i=r("div"),a=r("div"),c=r("span"),p=R(q),N=b(),k=r("span"),f=r("a"),z=R(T),d=b(),S=r("p"),B=R(C),F=b(),P=r("span"),_=R(A),I=R(" plays"),K=b(),this.h()},l(E){i=o(E,"DIV",{class:!0});var u=v(i);a=o(u,"DIV",{class:!0});var D=v(a);c=o(D,"SPAN",{class:!0});var le=v(c);p=H(le,q),le.forEach(h),N=y(D),k=o(D,"SPAN",{class:!0});var oe=v(k);f=o(oe,"A",{href:!0,target:!0});var he=v(f);z=H(he,T),he.forEach(h),d=y(oe),S=o(oe,"P",{});var me=v(S);B=H(me,C),me.forEach(h),oe.forEach(h),D.forEach(h),F=y(u),P=o(u,"SPAN",{class:!0});var W=v(P);_=H(W,A),I=H(W," plays"),W.forEach(h),K=y(u),u.forEach(h),this.h()},h(){s(c,"class","inline-block w-9"),s(f,"href",w=l[43].url),s(f,"target","_blank"),s(k,"class","inline-block align-middle"),s(a,"class","mr-auto"),s(P,"class","pr-2 md:pr-4 align-middle my-auto"),s(i,"class","px-4 my-3 w-full inline-flex")},m(E,u){Ce(E,i,u),e(i,a),e(a,c),e(c,p),e(a,N),e(a,k),e(k,f),e(f,z),e(k,d),e(k,S),e(S,B),e(i,F),e(i,P),e(P,_),e(P,I),e(i,K)},p(E,u){u[0]&32&&T!==(T=E[43].name+"")&&ie(z,T),u[0]&32&&w!==(w=E[43].url)&&s(f,"href",w),u[0]&32&&C!==(C=E[43].artist.name+"")&&ie(B,C),u[0]&32&&A!==(A=E[43].playcount+"")&&ie(_,A)},d(E){E&&h(i)}}}function it(l){let i,a,c,q=++l[42]+"",p,N,k,f,T=l[40].name+"",z,w,d,S,C=l[40].playcount+"",B,F,P;return{c(){i=r("div"),a=r("div"),c=r("span"),p=R(q),N=b(),k=r("span"),f=r("a"),z=R(T),d=b(),S=r("span"),B=R(C),F=R(" plays"),P=b(),this.h()},l(A){i=o(A,"DIV",{class:!0});var _=v(i);a=o(_,"DIV",{class:!0});var I=v(a);c=o(I,"SPAN",{class:!0});var K=v(c);p=H(K,q),K.forEach(h),N=y(I),k=o(I,"SPAN",{class:!0});var E=v(k);f=o(E,"A",{href:!0,target:!0});var u=v(f);z=H(u,T),u.forEach(h),E.forEach(h),I.forEach(h),d=y(_),S=o(_,"SPAN",{class:!0});var D=v(S);B=H(D,C),F=H(D," plays"),D.forEach(h),P=y(_),_.forEach(h),this.h()},h(){s(c,"class","inline-block w-9"),s(f,"href",w=l[40].url),s(f,"target","_blank"),s(k,"class","inline-block align-middle"),s(a,"class","mr-auto"),s(S,"class","pr-2 md:pr-4 align-middle my-auto"),s(i,"class","px-4 my-4 w-full inline-flex")},m(A,_){Ce(A,i,_),e(i,a),e(a,c),e(c,p),e(a,N),e(a,k),e(k,f),e(f,z),e(i,d),e(i,S),e(S,B),e(S,F),e(i,P)},p(A,_){_[0]&64&&T!==(T=A[40].name+"")&&ie(z,T),_[0]&64&&w!==(w=A[40].url)&&s(f,"href",w),_[0]&64&&C!==(C=A[40].playcount+"")&&ie(B,C)},d(A){A&&h(i)}}}function gt(l){let i,a,c,q,p,N,k,f,T,z="Currently loading...",w,d,S,C,B,F,P,A,_,I,K="> currently listening to",E,u,D,le,oe,he,me,W,ce,ue,Ve="top tracks",Ee,G,Q,je="week",Ae,X,Me="month",Te,Z,m="year",O,Y,ye="all-time",ke,x,J,fe,ve,qe="top artists",Le,$,ae,Ke="week",Re,se,Ge="month",He,ne,Je="year",ze,re,Qe="all-time",Fe,U,Ye,Xe;We.title=i="[ home@akross:/"+Oe+" ]",c=new vt({props:{title:Oe}}),N=new pt({props:{title:Oe}});let ge=Be(l[5]),V=[];for(let t=0;t<ge.length;t+=1)V[t]=ct(ot(l,ge,t));let be=Be(l[6]),j=[];for(let t=0;t<be.length;t+=1)j[t]=it(rt(l,be,t));return{c(){a=b(),et(c.$$.fragment),q=b(),p=r("div"),et(N.$$.fragment),k=b(),f=r("div"),T=r("span"),T.textContent=z,w=b(),d=r("span"),S=R("> last played song was "),C=r("a"),B=R(l[2]),F=R(" by "),P=R(l[3]),A=b(),_=r("div"),I=r("span"),I.textContent=K,E=b(),u=r("span"),D=r("a"),le=R(l[2]),oe=R(" by "),he=R(l[3]),me=b(),W=r("div"),ce=r("div"),ue=r("h2"),ue.textContent=Ve,Ee=b(),G=r("span"),Q=r("button"),Q.textContent=je,Ae=b(),X=r("button"),X.textContent=Me,Te=b(),Z=r("button"),Z.textContent=m,O=b(),Y=r("button"),Y.textContent=ye,ke=b();for(let t=0;t<V.length;t+=1)V[t].c();x=b(),J=r("div"),fe=r("div"),ve=r("h2"),ve.textContent=qe,Le=b(),$=r("span"),ae=r("button"),ae.textContent=Ke,Re=b(),se=r("button"),se.textContent=Ge,He=b(),ne=r("button"),ne.textContent=Je,ze=b(),re=r("button"),re.textContent=Qe,Fe=b();for(let t=0;t<j.length;t+=1)j[t].c();this.h()},l(t){ut("svelte-1x1mgtu",We.head).forEach(h),a=y(t),tt(c.$$.fragment,t),q=y(t),p=o(t,"DIV",{class:!0});var n=v(p);tt(N.$$.fragment,n),k=y(n),f=o(n,"DIV",{});var ee=v(f);T=o(ee,"SPAN",{id:!0,"data-svelte-h":!0}),te(T)!=="svelte-1y72wgj"&&(T.textContent=z),w=y(ee),d=o(ee,"SPAN",{id:!0,class:!0});var we=v(d);S=H(we,"> last played song was "),C=o(we,"A",{href:!0,target:!0});var Ze=v(C);B=H(Ze,l[2]),Ze.forEach(h),F=H(we," by "),P=H(we,l[3]),we.forEach(h),A=y(ee),_=o(ee,"DIV",{id:!0,class:!0});var Ne=v(_);I=o(Ne,"SPAN",{"data-svelte-h":!0}),te(I)!=="svelte-1bi60oo"&&(I.textContent=K),E=y(Ne),u=o(Ne,"SPAN",{class:!0});var Pe=v(u);D=o(Pe,"A",{href:!0,target:!0});var xe=v(D);le=H(xe,l[2]),xe.forEach(h),oe=H(Pe," by "),he=H(Pe,l[3]),Pe.forEach(h),Ne.forEach(h),ee.forEach(h),me=y(n),W=o(n,"DIV",{class:!0});var Se=v(W);ce=o(Se,"DIV",{class:!0});var Ie=v(ce);ue=o(Ie,"H2",{class:!0,"data-svelte-h":!0}),te(ue)!=="svelte-jw53kh"&&(ue.textContent=Ve),Ee=y(Ie),G=o(Ie,"SPAN",{class:!0});var _e=v(G);Q=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),te(Q)!=="svelte-r392cl"&&(Q.textContent=je),Ae=y(_e),X=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),te(X)!=="svelte-1ozxs1b"&&(X.textContent=Me),Te=y(_e),Z=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),te(Z)!=="svelte-l26hsu"&&(Z.textContent=m),O=y(_e),Y=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),te(Y)!=="svelte-1ybdw0a"&&(Y.textContent=ye),_e.forEach(h),Ie.forEach(h),ke=y(Se);for(let pe=0;pe<V.length;pe+=1)V[pe].l(Se);Se.forEach(h),x=y(n),J=o(n,"DIV",{class:!0});var De=v(J);fe=o(De,"DIV",{class:!0});var Ue=v(fe);ve=o(Ue,"H2",{class:!0,"data-svelte-h":!0}),te(ve)!=="svelte-z66aep"&&(ve.textContent=qe),Le=y(Ue),$=o(Ue,"SPAN",{class:!0});var de=v($);ae=o(de,"BUTTON",{class:!0,"data-svelte-h":!0}),te(ae)!=="svelte-nmaell"&&(ae.textContent=Ke),Re=y(de),se=o(de,"BUTTON",{class:!0,"data-svelte-h":!0}),te(se)!=="svelte-yb2609"&&(se.textContent=Ge),He=y(de),ne=o(de,"BUTTON",{class:!0,"data-svelte-h":!0}),te(ne)!=="svelte-vptrvk"&&(ne.textContent=Je),ze=y(de),re=o(de,"BUTTON",{class:!0,"data-svelte-h":!0}),te(re)!=="svelte-1npn37o"&&(re.textContent=Qe),de.forEach(h),Ue.forEach(h),Fe=y(De);for(let pe=0;pe<j.length;pe+=1)j[pe].l(De);De.forEach(h),n.forEach(h),this.h()},h(){s(T,"id","loadingMessage"),s(C,"href",l[4]),s(C,"target","_blank"),s(d,"id","nowPlayingNone"),s(d,"class","hidden"),s(D,"href",l[4]),s(D,"target","_blank"),s(u,"class","normal-case"),s(_,"id","listening"),s(_,"class","hidden"),s(ue,"class","mr-auto"),s(Q,"class","svelte-1g3s2em"),M(Q,"active",l[0]==="week"),s(X,"class","svelte-1g3s2em"),M(X,"active",l[0]==="month"),s(Z,"class","svelte-1g3s2em"),M(Z,"active",l[0]==="year"),s(Y,"class","svelte-1g3s2em"),M(Y,"active",l[0]==="all-time"),s(G,"class","space-x-4"),s(ce,"class","inline-flex w-full pr-2 md:pr-4"),s(W,"class","mt-4"),s(ve,"class","mr-auto"),s(ae,"class","svelte-1g3s2em"),M(ae,"active",l[1]==="week"),s(se,"class","svelte-1g3s2em"),M(se,"active",l[1]==="month"),s(ne,"class","svelte-1g3s2em"),M(ne,"active",l[1]==="year"),s(re,"class","svelte-1g3s2em"),M(re,"active",l[1]==="all-time"),s($,"class","space-x-4"),s(fe,"class","inline-flex w-full pr-2 md:pr-4"),s(J,"class","mt-4"),s(p,"class","max-w-content w-full")},m(t,g){Ce(t,a,g),lt(c,t,g),Ce(t,q,g),Ce(t,p,g),lt(N,p,null),e(p,k),e(p,f),e(f,T),e(f,w),e(f,d),e(d,S),e(d,C),e(C,B),e(d,F),e(d,P),e(f,A),e(f,_),e(_,I),e(_,E),e(_,u),e(u,D),e(D,le),e(u,oe),e(u,he),e(p,me),e(p,W),e(W,ce),e(ce,ue),e(ce,Ee),e(ce,G),e(G,Q),e(G,Ae),e(G,X),e(G,Te),e(G,Z),e(G,O),e(G,Y),e(W,ke);for(let n=0;n<V.length;n+=1)V[n]&&V[n].m(W,null);e(p,x),e(p,J),e(J,fe),e(fe,ve),e(fe,Le),e(fe,$),e($,ae),e($,Re),e($,se),e($,He),e($,ne),e($,ze),e($,re),e(J,Fe);for(let n=0;n<j.length;n+=1)j[n]&&j[n].m(J,null);U=!0,Ye||(Xe=[L(Q,"click",l[9]),L(Q,"click",l[10]),L(X,"click",l[11]),L(X,"click",l[12]),L(Z,"click",l[13]),L(Z,"click",l[14]),L(Y,"click",l[15]),L(Y,"click",l[16]),L(ae,"click",l[17]),L(ae,"click",l[18]),L(se,"click",l[19]),L(se,"click",l[20]),L(ne,"click",l[21]),L(ne,"click",l[22]),L(re,"click",l[23]),L(re,"click",l[24])],Ye=!0)},p(t,g){if((!U||g&0)&&i!==(i="[ home@akross:/"+Oe+" ]")&&(We.title=i),(!U||g[0]&4)&&ie(B,t[2]),(!U||g[0]&16)&&s(C,"href",t[4]),(!U||g[0]&8)&&ie(P,t[3]),(!U||g[0]&4)&&ie(le,t[2]),(!U||g[0]&16)&&s(D,"href",t[4]),(!U||g[0]&8)&&ie(he,t[3]),(!U||g[0]&1)&&M(Q,"active",t[0]==="week"),(!U||g[0]&1)&&M(X,"active",t[0]==="month"),(!U||g[0]&1)&&M(Z,"active",t[0]==="year"),(!U||g[0]&1)&&M(Y,"active",t[0]==="all-time"),g[0]&32){ge=Be(t[5]);let n;for(n=0;n<ge.length;n+=1){const ee=ot(t,ge,n);V[n]?V[n].p(ee,g):(V[n]=ct(ee),V[n].c(),V[n].m(W,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=ge.length}if((!U||g[0]&2)&&M(ae,"active",t[1]==="week"),(!U||g[0]&2)&&M(se,"active",t[1]==="month"),(!U||g[0]&2)&&M(ne,"active",t[1]==="year"),(!U||g[0]&2)&&M(re,"active",t[1]==="all-time"),g[0]&64){be=Be(t[6]);let n;for(n=0;n<be.length;n+=1){const ee=rt(t,be,n);j[n]?j[n].p(ee,g):(j[n]=it(ee),j[n].c(),j[n].m(J,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=be.length}},i(t){U||(at(c.$$.fragment,t),at(N.$$.fragment,t),U=!0)},o(t){st(c.$$.fragment,t),st(N.$$.fragment,t),U=!1},d(t){t&&(h(a),h(q),h(p)),nt(c,t),nt(N),$e(V,t),$e(j,t),Ye=!1,ft(Xe)}}}const bt="b5d288ff2d78a6c4e32cfd6d97d2a67e",yt="https://ws.audioscrobbler.com/2.0/",Oe="music-list";function wt(l,i,a){let c,q,p,N="all-time",k="all-time",f="",T="",z="",w=[],d=[];_t(()=>{c=document.getElementById("loadingMessage"),q=document.getElementById("listening"),p=document.getElementById("nowPlayingNone"),E("overall"),u(),D(12e4)});async function S(){const O=(await le("user.getRecentTracks",1)).recenttracks.track[0];a(2,f=O.name),a(3,T=O.artist["#text"]),a(4,z=O.url),c&&(c.style.display="none"),O["@attr"]&&O["@attr"].nowplaying?(p.style.display="none",q.style.display="block"):p.style.display="block"}let C=null,B=null,F=null,P=null,A=null,_=null,I=null,K=null;async function E(m){if(m==="7day"&&C!=null)a(5,w=C);else if(m==="1month"&&B!=null)a(5,w=B);else if(m==="12month"&&F!=null)a(5,w=F);else if(m==="overall"&&P!=null)a(5,w=P);else{let O=await le("user.getTopTracks",10,m);a(5,w=O.toptracks.track),m==="7day"?C=w:m==="1month"?B=w:m==="12month"?F=w:m==="overall"&&(P=w)}}async function u(m){if(m==="7day"&&A!=null)a(6,d=A);else if(m==="1month"&&_!=null)a(6,d=_);else if(m==="12month"&&I!=null)a(6,d=I);else if(m==="overall"&&K!=null)a(6,d=K);else{let O=await le("user.getTopArtists",8,m);a(6,d=O.topartists.artist),m==="7day"?A=d:m==="1month"?_=d:m==="12month"?I=d:m==="overall"&&(K=d)}}async function D(m){async function O(){try{await S()}catch(Y){console.error(Y)}finally{setTimeout(O,m)}}O()}async function le(m,O,Y){const ye=new URL(yt),ke={method:m,user:"akrossu",limit:O,period:Y,api_key:bt,format:"json"};Object.keys(ke).forEach(x=>ye.searchParams.append(x,ke[x]));try{let x;return await fetch(ye).then(J=>J.json()).then(J=>{x=J}),x}catch(x){throw console.error("Error fetching data: ",x),c&&(c.textContent="Error fetching data from LastFM"),x}}return[N,k,f,T,z,w,d,E,u,()=>{E("7day")},()=>a(0,N="week"),()=>E("1month"),()=>a(0,N="month"),()=>E("12month"),()=>a(0,N="year"),()=>E("overall"),()=>a(0,N="all-time"),()=>{u("7day")},()=>a(1,k="week"),()=>u("1month"),()=>a(1,k="month"),()=>u("12month"),()=>a(1,k="year"),()=>u("overall"),()=>a(1,k="all-time")]}class Nt extends dt{constructor(i){super(),mt(this,i,wt,gt,ht,{},null,[-1,-1])}}export{Nt as component};
