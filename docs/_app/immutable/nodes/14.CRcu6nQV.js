import{s as ht,a as g,f as r,l as z,z as ut,d as u,c as b,g as o,h as m,y as $,m as F,j as s,L as R,i as Ce,A as e,M as H,p as oe,E as $e,N as ft,o as _t}from"../chunks/scheduler.BtYfPFkB.js";import{S as dt,i as mt,b as et,d as tt,m as lt,a as at,t as st,e as nt}from"../chunks/index.D_F554_W.js";import{e as je}from"../chunks/each.D6YF6ztN.js";import{S as vt,H as pt}from"../chunks/sidebar.DryN8hsx.js";const kt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;new TextEncoder;const{document:qe}=kt;function rt(l,h,a){const i=l.slice();return i[39]=h[a],i[41]=a,i}function ot(l,h,a){const i=l.slice();return i[42]=h[a],i[41]=a,i}function ct(l){let h,a,i,K=++l[41]+"",v,p,T,f,N=l[42].name+"",E,y,I,P,w=l[42].artist.name+"",B,Y,D,A=l[42].playcount+"",_,U,L;return{c(){h=r("div"),a=r("div"),i=r("span"),v=z(K),p=g(),T=r("span"),f=r("a"),E=z(N),I=g(),P=r("p"),B=z(w),Y=g(),D=r("span"),_=z(A),U=z(" plays"),L=g(),this.h()},l(C){h=o(C,"DIV",{class:!0});var d=m(h);a=o(d,"DIV",{class:!0});var S=m(a);i=o(S,"SPAN",{class:!0});var ce=m(i);v=F(ce,K),ce.forEach(u),p=b(S),T=o(S,"SPAN",{class:!0});var se=m(T);f=o(se,"A",{href:!0,target:!0});var ie=m(f);E=F(ie,N),ie.forEach(u),I=b(se),P=o(se,"P",{});var de=m(P);B=F(de,w),de.forEach(u),se.forEach(u),S.forEach(u),Y=b(d),D=o(d,"SPAN",{class:!0});var q=m(D);_=F(q,A),U=F(q," plays"),q.forEach(u),L=b(d),d.forEach(u),this.h()},h(){s(i,"class","inline-block w-9"),s(f,"href",y=l[42].url),s(f,"target","_blank"),s(T,"class","inline-block align-middle"),s(a,"class","mr-auto"),s(D,"class","pr-2 md:pr-4 align-middle my-auto"),s(h,"class","px-4 my-3 w-full inline-flex")},m(C,d){Ce(C,h,d),e(h,a),e(a,i),e(i,v),e(a,p),e(a,T),e(T,f),e(f,E),e(T,I),e(T,P),e(P,B),e(h,Y),e(h,D),e(D,_),e(D,U),e(h,L)},p(C,d){d[0]&16&&N!==(N=C[42].name+"")&&oe(E,N),d[0]&16&&y!==(y=C[42].url)&&s(f,"href",y),d[0]&16&&w!==(w=C[42].artist.name+"")&&oe(B,w),d[0]&16&&A!==(A=C[42].playcount+"")&&oe(_,A)},d(C){C&&u(h)}}}function it(l){let h,a,i,K=++l[41]+"",v,p,T,f,N=l[39].name+"",E,y,I,P,w=l[39].playcount+"",B,Y,D;return{c(){h=r("div"),a=r("div"),i=r("span"),v=z(K),p=g(),T=r("span"),f=r("a"),E=z(N),I=g(),P=r("span"),B=z(w),Y=z(" plays"),D=g(),this.h()},l(A){h=o(A,"DIV",{class:!0});var _=m(h);a=o(_,"DIV",{class:!0});var U=m(a);i=o(U,"SPAN",{class:!0});var L=m(i);v=F(L,K),L.forEach(u),p=b(U),T=o(U,"SPAN",{class:!0});var C=m(T);f=o(C,"A",{href:!0,target:!0});var d=m(f);E=F(d,N),d.forEach(u),C.forEach(u),U.forEach(u),I=b(_),P=o(_,"SPAN",{class:!0});var S=m(P);B=F(S,w),Y=F(S," plays"),S.forEach(u),D=b(_),_.forEach(u),this.h()},h(){s(i,"class","inline-block w-9"),s(f,"href",y=l[39].url),s(f,"target","_blank"),s(T,"class","inline-block align-middle"),s(a,"class","mr-auto"),s(P,"class","pr-2 md:pr-4 align-middle my-auto"),s(h,"class","px-4 my-4 w-full inline-flex")},m(A,_){Ce(A,h,_),e(h,a),e(a,i),e(i,v),e(a,p),e(a,T),e(T,f),e(f,E),e(h,I),e(h,P),e(P,B),e(P,Y),e(h,D)},p(A,_){_[0]&32&&N!==(N=A[39].name+"")&&oe(E,N),_[0]&32&&y!==(y=A[39].url)&&s(f,"href",y),_[0]&32&&w!==(w=A[39].playcount+"")&&oe(B,w)},d(A){A&&u(h)}}}function gt(l){let h,a,i,K,v,p,T,f,N,E="Currently loading...",y,I,P,w,B,Y,D,A,_,U,L="> currently listening to",C,d,S,ce,se,ie,de,q,ne,he,Oe="top tracks",Ee,G,J,Ve="week",Ae,Q,Me="month",Te,c,O="year",me,W,ye="all-time",X,ve,re,ue,pe,We="top artists",Le,Z,ee,Ke="week",Re,te,Ge="month",He,le,Je="year",ze,ae,Qe="all-time",Fe,j,Ye,Xe;qe.title=h="[ home@akross:/"+Be+" ]",i=new vt({props:{title:Be}}),p=new pt({props:{title:Be}});let ge=je(l[4]),V=[];for(let t=0;t<ge.length;t+=1)V[t]=ct(ot(l,ge,t));let be=je(l[5]),M=[];for(let t=0;t<be.length;t+=1)M[t]=it(rt(l,be,t));return{c(){a=g(),et(i.$$.fragment),K=g(),v=r("div"),et(p.$$.fragment),T=g(),f=r("div"),N=r("span"),N.textContent=E,y=g(),I=r("span"),P=z("> last played song was "),w=r("a"),B=z(l[1]),Y=z(" by "),D=z(l[2]),A=g(),_=r("div"),U=r("span"),U.textContent=L,C=g(),d=r("span"),S=r("a"),ce=z(l[1]),se=z(" by "),ie=z(l[2]),de=g(),q=r("div"),ne=r("div"),he=r("h2"),he.textContent=Oe,Ee=g(),G=r("span"),J=r("button"),J.textContent=Ve,Ae=g(),Q=r("button"),Q.textContent=Me,Te=g(),c=r("button"),c.textContent=O,me=g(),W=r("button"),W.textContent=ye,X=g();for(let t=0;t<V.length;t+=1)V[t].c();ve=g(),re=r("div"),ue=r("div"),pe=r("h2"),pe.textContent=We,Le=g(),Z=r("span"),ee=r("button"),ee.textContent=Ke,Re=g(),te=r("button"),te.textContent=Ge,He=g(),le=r("button"),le.textContent=Je,ze=g(),ae=r("button"),ae.textContent=Qe,Fe=g();for(let t=0;t<M.length;t+=1)M[t].c();this.h()},l(t){ut("svelte-1x1mgtu",qe.head).forEach(u),a=b(t),tt(i.$$.fragment,t),K=b(t),v=o(t,"DIV",{class:!0});var n=m(v);tt(p.$$.fragment,n),T=b(n),f=o(n,"DIV",{});var x=m(f);N=o(x,"SPAN",{id:!0,"data-svelte-h":!0}),$(N)!=="svelte-1y72wgj"&&(N.textContent=E),y=b(x),I=o(x,"SPAN",{id:!0,class:!0});var we=m(I);P=F(we,"> last played song was "),w=o(we,"A",{href:!0,target:!0});var Ze=m(w);B=F(Ze,l[1]),Ze.forEach(u),Y=F(we," by "),D=F(we,l[2]),we.forEach(u),A=b(x),_=o(x,"DIV",{id:!0,class:!0});var Ne=m(_);U=o(Ne,"SPAN",{"data-svelte-h":!0}),$(U)!=="svelte-1bi60oo"&&(U.textContent=L),C=b(Ne),d=o(Ne,"SPAN",{class:!0});var Pe=m(d);S=o(Pe,"A",{href:!0,target:!0});var xe=m(S);ce=F(xe,l[1]),xe.forEach(u),se=F(Pe," by "),ie=F(Pe,l[2]),Pe.forEach(u),Ne.forEach(u),x.forEach(u),de=b(n),q=o(n,"DIV",{class:!0});var Se=m(q);ne=o(Se,"DIV",{class:!0});var Ie=m(ne);he=o(Ie,"H2",{class:!0,"data-svelte-h":!0}),$(he)!=="svelte-jw53kh"&&(he.textContent=Oe),Ee=b(Ie),G=o(Ie,"SPAN",{class:!0});var fe=m(G);J=o(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),$(J)!=="svelte-r392cl"&&(J.textContent=Ve),Ae=b(fe),Q=o(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),$(Q)!=="svelte-1ozxs1b"&&(Q.textContent=Me),Te=b(fe),c=o(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),$(c)!=="svelte-l26hsu"&&(c.textContent=O),me=b(fe),W=o(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),$(W)!=="svelte-1ybdw0a"&&(W.textContent=ye),fe.forEach(u),Ie.forEach(u),X=b(Se);for(let ke=0;ke<V.length;ke+=1)V[ke].l(Se);Se.forEach(u),ve=b(n),re=o(n,"DIV",{class:!0});var De=m(re);ue=o(De,"DIV",{class:!0});var Ue=m(ue);pe=o(Ue,"H2",{class:!0,"data-svelte-h":!0}),$(pe)!=="svelte-z66aep"&&(pe.textContent=We),Le=b(Ue),Z=o(Ue,"SPAN",{class:!0});var _e=m(Z);ee=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),$(ee)!=="svelte-5l0uxx"&&(ee.textContent=Ke),Re=b(_e),te=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),$(te)!=="svelte-6crjrd"&&(te.textContent=Ge),He=b(_e),le=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),$(le)!=="svelte-g50fs"&&(le.textContent=Je),ze=b(_e),ae=o(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),$(ae)!=="svelte-114q7nc"&&(ae.textContent=Qe),_e.forEach(u),Ue.forEach(u),Fe=b(De);for(let ke=0;ke<M.length;ke+=1)M[ke].l(De);De.forEach(u),n.forEach(u),this.h()},h(){s(N,"id","loadingMessage"),s(w,"href",l[3]),s(w,"target","_blank"),s(I,"id","nowPlayingNone"),s(I,"class","hidden"),s(S,"href",l[3]),s(S,"target","_blank"),s(d,"class","normal-case"),s(_,"id","listening"),s(_,"class","hidden"),s(he,"class","mr-auto"),s(J,"class","svelte-1g3s2em"),R(J,"active",l[0]==="week"),s(Q,"class","svelte-1g3s2em"),R(Q,"active",l[0]==="month"),s(c,"class","svelte-1g3s2em"),R(c,"active",l[0]==="year"),s(W,"class","svelte-1g3s2em"),R(W,"active",l[0]==="all-time"),s(G,"class","space-x-4"),s(ne,"class","inline-flex w-full pr-2 md:pr-4"),s(q,"class","mt-4"),s(pe,"class","mr-auto"),s(ee,"class","svelte-1g3s2em"),R(ee,"active",l[0]==="week"),s(te,"class","svelte-1g3s2em"),R(te,"active",l[0]==="month"),s(le,"class","svelte-1g3s2em"),R(le,"active",l[0]==="year"),s(ae,"class","svelte-1g3s2em"),R(ae,"active",l[0]==="all-time"),s(Z,"class","space-x-4"),s(ue,"class","inline-flex w-full pr-2 md:pr-4"),s(re,"class","mt-4"),s(v,"class","max-w-content w-full")},m(t,k){Ce(t,a,k),lt(i,t,k),Ce(t,K,k),Ce(t,v,k),lt(p,v,null),e(v,T),e(v,f),e(f,N),e(f,y),e(f,I),e(I,P),e(I,w),e(w,B),e(I,Y),e(I,D),e(f,A),e(f,_),e(_,U),e(_,C),e(_,d),e(d,S),e(S,ce),e(d,se),e(d,ie),e(v,de),e(v,q),e(q,ne),e(ne,he),e(ne,Ee),e(ne,G),e(G,J),e(G,Ae),e(G,Q),e(G,Te),e(G,c),e(G,me),e(G,W),e(q,X);for(let n=0;n<V.length;n+=1)V[n]&&V[n].m(q,null);e(v,ve),e(v,re),e(re,ue),e(ue,pe),e(ue,Le),e(ue,Z),e(Z,ee),e(Z,Re),e(Z,te),e(Z,He),e(Z,le),e(Z,ze),e(Z,ae),e(re,Fe);for(let n=0;n<M.length;n+=1)M[n]&&M[n].m(re,null);j=!0,Ye||(Xe=[H(J,"click",l[8]),H(J,"click",l[9]),H(Q,"click",l[10]),H(Q,"click",l[11]),H(c,"click",l[12]),H(c,"click",l[13]),H(W,"click",l[14]),H(W,"click",l[15]),H(ee,"click",l[16]),H(ee,"click",l[17]),H(te,"click",l[18]),H(te,"click",l[19]),H(le,"click",l[20]),H(le,"click",l[21]),H(ae,"click",l[22]),H(ae,"click",l[23])],Ye=!0)},p(t,k){if((!j||k&0)&&h!==(h="[ home@akross:/"+Be+" ]")&&(qe.title=h),(!j||k[0]&2)&&oe(B,t[1]),(!j||k[0]&8)&&s(w,"href",t[3]),(!j||k[0]&4)&&oe(D,t[2]),(!j||k[0]&2)&&oe(ce,t[1]),(!j||k[0]&8)&&s(S,"href",t[3]),(!j||k[0]&4)&&oe(ie,t[2]),(!j||k[0]&1)&&R(J,"active",t[0]==="week"),(!j||k[0]&1)&&R(Q,"active",t[0]==="month"),(!j||k[0]&1)&&R(c,"active",t[0]==="year"),(!j||k[0]&1)&&R(W,"active",t[0]==="all-time"),k[0]&16){ge=je(t[4]);let n;for(n=0;n<ge.length;n+=1){const x=ot(t,ge,n);V[n]?V[n].p(x,k):(V[n]=ct(x),V[n].c(),V[n].m(q,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=ge.length}if((!j||k[0]&1)&&R(ee,"active",t[0]==="week"),(!j||k[0]&1)&&R(te,"active",t[0]==="month"),(!j||k[0]&1)&&R(le,"active",t[0]==="year"),(!j||k[0]&1)&&R(ae,"active",t[0]==="all-time"),k[0]&32){be=je(t[5]);let n;for(n=0;n<be.length;n+=1){const x=rt(t,be,n);M[n]?M[n].p(x,k):(M[n]=it(x),M[n].c(),M[n].m(re,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=be.length}},i(t){j||(at(i.$$.fragment,t),at(p.$$.fragment,t),j=!0)},o(t){st(i.$$.fragment,t),st(p.$$.fragment,t),j=!1},d(t){t&&(u(a),u(K),u(v)),nt(i,t),nt(p),$e(V,t),$e(M,t),Ye=!1,ft(Xe)}}}const bt="b5d288ff2d78a6c4e32cfd6d97d2a67e",yt="https://ws.audioscrobbler.com/2.0/",Be="music-list";function wt(l,h,a){let i,K,v,p="all-time",T="",f="",N="",E=[],y=[];_t(()=>{i=document.getElementById("loadingMessage"),K=document.getElementById("listening"),v=document.getElementById("nowPlayingNone"),L("overall"),C(),d(12e4)});async function I(){const O=(await S("user.getRecentTracks",1)).recenttracks.track[0];a(1,T=O.name),a(2,f=O.artist["#text"]),a(3,N=O.url),i&&(i.style.display="none"),O["@attr"]&&O["@attr"].nowplaying?(v.style.display="none",K.style.display="block"):v.style.display="block"}let P=null,w=null,B=null,Y=null,D=null,A=null,_=null,U=null;async function L(c){if(c==="7day"&&P!=null)a(4,E=P);else if(c==="1month"&&w!=null)a(4,E=w);else if(c==="12month"&&B!=null)a(4,E=B);else if(c==="overall"&&Y!=null)a(4,E=Y);else{let O=await S("user.getTopTracks",10,c);a(4,E=O.toptracks.track),c==="7day"?P=E:c==="1month"?w=E:c==="12month"?B=E:c==="overall"&&(Y=E)}}async function C(c){if(c==="7day"&&D!=null)a(5,y=D);else if(c==="1month"&&A!=null)a(5,y=A);else if(c==="12month"&&_!=null)a(5,y=_);else if(c==="overall"&&U!=null)a(5,y=U);else{let O=await S("user.getTopArtists",8,c);a(5,y=O.topartists.artist),c==="7day"?D=y:c==="1month"?A=y:c==="12month"?_=y:c==="overall"&&(U=y)}}async function d(c){async function O(){try{await I()}catch(me){console.error(me)}finally{setTimeout(O,c)}}O()}async function S(c,O,me){const W=new URL(yt),ye={method:c,user:"akrossu",limit:O,period:me,api_key:bt,format:"json"};Object.keys(ye).forEach(X=>W.searchParams.append(X,ye[X]));try{let X;return await fetch(W).then(ve=>ve.json()).then(ve=>{X=ve}),X}catch(X){throw console.error("Error fetching data: ",X),i&&(i.textContent="Error fetching data from LastFM"),X}}return[p,T,f,N,E,y,L,C,()=>{L("7day")},()=>a(0,p="week"),()=>L("1month"),()=>a(0,p="month"),()=>L("12month"),()=>a(0,p="year"),()=>L("overall"),()=>a(0,p="all-time"),()=>{C("7day")},()=>a(0,p="week"),()=>C("1month"),()=>a(0,p="month"),()=>C("12month"),()=>a(0,p="year"),()=>C("overall"),()=>a(0,p="all-time")]}class Nt extends dt{constructor(h){super(),mt(this,h,wt,gt,ht,{},null,[-1,-1])}}export{Nt as component};
