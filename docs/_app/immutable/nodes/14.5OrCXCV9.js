import{s as $e,a as P,e as r,t as q,h as Le,d as f,c as N,b as c,f as w,g as te,l as z,i as s,r as Q,j as fe,k as e,u as W,p as le,C as Me,H as Oe,v as He}from"../chunks/scheduler.BHOCWXDt.js";import{S as Fe,i as qe,c as Ne,a as Se,m as je,t as Ie,b as Ue,d as Be}from"../chunks/index.D1hKqEVN.js";import{e as De}from"../chunks/each.D6YF6ztN.js";import{S as ze,H as Ke}from"../chunks/sidebar.DodSoR3N.js";const Ye=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;new TextEncoder;const{document:ke}=Ye;function Re(a,_,l){const n=a.slice();return n[24]=_[l],n[26]=l,n}function Ve(a){let _,l,n,M=++a[26]+"",h,p,E,i,k=a[24].name+"",O,H,d,D,b=a[24].artist.name+"",j,Y;return{c(){_=r("div"),l=r("p"),n=r("span"),h=q(M),p=P(),E=r("span"),i=r("a"),O=q(k),d=P(),D=r("p"),j=q(b),Y=P(),this.h()},l(C){_=c(C,"DIV",{class:!0});var S=w(_);l=c(S,"P",{});var T=w(l);n=c(T,"SPAN",{class:!0});var F=w(n);h=z(F,M),F.forEach(f),p=N(T),E=c(T,"SPAN",{class:!0});var G=w(E);i=c(G,"A",{href:!0,target:!0});var X=w(i);O=z(X,k),X.forEach(f),d=N(G),D=c(G,"P",{});var I=w(D);j=z(I,b),I.forEach(f),G.forEach(f),T.forEach(f),Y=N(S),S.forEach(f),this.h()},h(){s(n,"class","inline-block w-9"),s(i,"href",H=a[24].url),s(i,"target","_blank"),s(E,"class","inline-block align-middle"),s(_,"class","my-4")},m(C,S){fe(C,_,S),e(_,l),e(l,n),e(n,h),e(l,p),e(l,E),e(E,i),e(i,O),e(E,d),e(E,D),e(D,j),e(_,Y)},p(C,S){S&16&&k!==(k=C[24].name+"")&&le(O,k),S&16&&H!==(H=C[24].url)&&s(i,"href",H),S&16&&b!==(b=C[24].artist.name+"")&&le(j,b)},d(C){C&&f(_)}}}function Ge(a){let _,l,n,M,h,p,E,i,k,O="Currently loading...",H,d,D,b,j,Y,C,S,T,F,G="> currently listening to",X,I,y,g,Z,x,ae,m,U,ee,be="top tracks",he,B,R,ye="week",ue,V,we="month",_e,$,Ee="year",me,L,Ce="all-time",pe,A,ge,Te;ke.title=_="[ home@akross:/"+de+" ]",n=new ze({props:{title:de}}),p=new Ke({props:{title:de}});let se=De(a[4]),v=[];for(let t=0;t<se.length;t+=1)v[t]=Ve(Re(a,se,t));return{c(){l=P(),Ne(n.$$.fragment),M=P(),h=r("div"),Ne(p.$$.fragment),E=P(),i=r("div"),k=r("span"),k.textContent=O,H=P(),d=r("span"),D=q("> last played song was "),b=r("a"),j=q(a[1]),Y=q(" by "),C=q(a[2]),S=P(),T=r("div"),F=r("span"),F.textContent=G,X=P(),I=r("span"),y=r("a"),g=q(a[1]),Z=q(" by "),x=q(a[2]),ae=P(),m=r("div"),U=r("div"),ee=r("h2"),ee.textContent=be,he=P(),B=r("span"),R=r("button"),R.textContent=ye,ue=P(),V=r("button"),V.textContent=we,_e=P(),$=r("button"),$.textContent=Ee,me=P(),L=r("button"),L.textContent=Ce,pe=P();for(let t=0;t<v.length;t+=1)v[t].c();this.h()},l(t){Le("svelte-1x1mgtu",ke.head).forEach(f),l=N(t),Se(n.$$.fragment,t),M=N(t),h=c(t,"DIV",{class:!0});var o=w(h);Se(p.$$.fragment,o),E=N(o),i=c(o,"DIV",{});var K=w(i);k=c(K,"SPAN",{id:!0,"data-svelte-h":!0}),te(k)!=="svelte-1y72wgj"&&(k.textContent=O),H=N(K),d=c(K,"SPAN",{id:!0,class:!0});var ne=w(d);D=z(ne,"> last played song was "),b=c(ne,"A",{href:!0,target:!0});var Ae=w(b);j=z(Ae,a[1]),Ae.forEach(f),Y=z(ne," by "),C=z(ne,a[2]),ne.forEach(f),S=N(K),T=c(K,"DIV",{id:!0,class:!0});var oe=w(T);F=c(oe,"SPAN",{"data-svelte-h":!0}),te(F)!=="svelte-1bi60oo"&&(F.textContent=G),X=N(oe),I=c(oe,"SPAN",{class:!0});var re=w(I);y=c(re,"A",{href:!0,target:!0});var Pe=w(y);g=z(Pe,a[1]),Pe.forEach(f),Z=z(re," by "),x=z(re,a[2]),re.forEach(f),oe.forEach(f),K.forEach(f),ae=N(o),m=c(o,"DIV",{class:!0});var ce=w(m);U=c(ce,"DIV",{class:!0});var ie=w(U);ee=c(ie,"H2",{class:!0,"data-svelte-h":!0}),te(ee)!=="svelte-jw53kh"&&(ee.textContent=be),he=N(ie),B=c(ie,"SPAN",{class:!0});var J=w(B);R=c(J,"BUTTON",{class:!0,"data-svelte-h":!0}),te(R)!=="svelte-ty6f69"&&(R.textContent=ye),ue=N(J),V=c(J,"BUTTON",{class:!0,"data-svelte-h":!0}),te(V)!=="svelte-1ss0ofx"&&(V.textContent=we),_e=N(J),$=c(J,"BUTTON",{class:!0,"data-svelte-h":!0}),te($)!=="svelte-zm4u0w"&&($.textContent=Ee),me=N(J),L=c(J,"BUTTON",{class:!0,"data-svelte-h":!0}),te(L)!=="svelte-gvzq7k"&&(L.textContent=Ce),J.forEach(f),ie.forEach(f),pe=N(ce);for(let ve=0;ve<v.length;ve+=1)v[ve].l(ce);ce.forEach(f),o.forEach(f),this.h()},h(){s(k,"id","loadingMessage"),s(b,"href",a[3]),s(b,"target","_blank"),s(d,"id","nowPlayingNone"),s(d,"class","hidden"),s(y,"href",a[3]),s(y,"target","_blank"),s(I,"class","normal-case"),s(T,"id","listening"),s(T,"class","hidden"),s(ee,"class","mr-auto"),s(R,"class","svelte-1g3s2em"),Q(R,"active",a[0]==="week"),s(V,"class","svelte-1g3s2em"),Q(V,"active",a[0]==="month"),s($,"class","svelte-1g3s2em"),Q($,"active",a[0]==="year"),s(L,"class","svelte-1g3s2em"),Q(L,"active",a[0]==="all-time"),s(B,"class","space-x-4"),s(U,"class","inline-flex w-full pr-2 md:pr-4"),s(m,"class","mt-4"),s(h,"class","max-w-content w-full")},m(t,u){fe(t,l,u),je(n,t,u),fe(t,M,u),fe(t,h,u),je(p,h,null),e(h,E),e(h,i),e(i,k),e(i,H),e(i,d),e(d,D),e(d,b),e(b,j),e(d,Y),e(d,C),e(i,S),e(i,T),e(T,F),e(T,X),e(T,I),e(I,y),e(y,g),e(I,Z),e(I,x),e(h,ae),e(h,m),e(m,U),e(U,ee),e(U,he),e(U,B),e(B,R),e(B,ue),e(B,V),e(B,_e),e(B,$),e(B,me),e(B,L),e(m,pe);for(let o=0;o<v.length;o+=1)v[o]&&v[o].m(m,null);A=!0,ge||(Te=[W(R,"click",a[6]),W(R,"click",a[7]),W(V,"click",a[8]),W(V,"click",a[9]),W($,"click",a[10]),W($,"click",a[11]),W(L,"click",a[12]),W(L,"click",a[13])],ge=!0)},p(t,[u]){if((!A||u&0)&&_!==(_="[ home@akross:/"+de+" ]")&&(ke.title=_),(!A||u&2)&&le(j,t[1]),(!A||u&8)&&s(b,"href",t[3]),(!A||u&4)&&le(C,t[2]),(!A||u&2)&&le(g,t[1]),(!A||u&8)&&s(y,"href",t[3]),(!A||u&4)&&le(x,t[2]),(!A||u&1)&&Q(R,"active",t[0]==="week"),(!A||u&1)&&Q(V,"active",t[0]==="month"),(!A||u&1)&&Q($,"active",t[0]==="year"),(!A||u&1)&&Q(L,"active",t[0]==="all-time"),u&16){se=De(t[4]);let o;for(o=0;o<se.length;o+=1){const K=Re(t,se,o);v[o]?v[o].p(K,u):(v[o]=Ve(K),v[o].c(),v[o].m(m,null))}for(;o<v.length;o+=1)v[o].d(1);v.length=se.length}},i(t){A||(Ie(n.$$.fragment,t),Ie(p.$$.fragment,t),A=!0)},o(t){Ue(n.$$.fragment,t),Ue(p.$$.fragment,t),A=!1},d(t){t&&(f(l),f(M),f(h)),Be(n,t),Be(p),Me(v,t),ge=!1,Oe(Te)}}}const Je="b5d288ff2d78a6c4e32cfd6d97d2a67e",Qe="https://ws.audioscrobbler.com/2.0/",de="music-list";function We(a,_,l){let n,M,h,p="all-time",E="",i="",k="",O=[];He(()=>{n=document.getElementById("loadingMessage"),M=document.getElementById("listening"),h=document.getElementById("nowPlayingNone"),d("overall"),D(),b(12e4)});async function H(){const g=(await j("user.getRecentTracks",1)).recenttracks.track[0];l(1,E=g.name),l(2,i=g.artist["#text"]),l(3,k=g.url),n&&(n.style.display="none"),g["@attr"]&&g["@attr"].nowplaying?(h.style.display="none",M.style.display="block"):h.style.display="block"}async function d(y){let g=await j("user.getTopTracks",10,y);l(4,O=g.toptracks.track)}async function D(){(await j("user.getTopArtists",8)).topartists.artist}async function b(y){async function g(){try{await H()}catch(Z){console.error(Z)}finally{setTimeout(g,y)}}g()}async function j(y,g,Z){const x=new URL(Qe),ae={method:y,user:"akrossu",limit:g,period:Z,api_key:Je,format:"json"};Object.keys(ae).forEach(m=>x.searchParams.append(m,ae[m]));try{let m;return await fetch(x).then(U=>U.json()).then(U=>{m=U}),m}catch(m){throw console.error("Error fetching data: ",m),n&&(n.textContent="Error fetching data from LastFM"),m}}return[p,E,i,k,O,d,()=>{d("7day")},()=>l(0,p="week"),()=>d("1month"),()=>l(0,p="month"),()=>d("12month"),()=>l(0,p="year"),()=>d("overall"),()=>l(0,p="all-time")]}class tt extends Fe{constructor(_){super(),qe(this,_,We,Ge,$e,{})}}export{tt as component};
